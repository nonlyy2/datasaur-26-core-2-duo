# üî• FIRE ‚Äî Freedom Intelligent Routing Engine

> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è AI-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π ¬∑ Freedom Broker Hackathon

```
tickets.csv ‚îÄ‚îÄ‚ñ∫ Go-–±—ç–∫–µ–Ω–¥ ‚îÄ‚îÄ‚ñ∫ Gemini AI (–±–∞—Ç—á) ‚îÄ‚îÄ‚ñ∫ –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è ‚îÄ‚îÄ‚ñ∫ –†–æ—É—Ç–∏–Ω–≥ ‚îÄ‚îÄ‚ñ∫ results.csv
                                                                                     ‚îÇ
                                                                          Streamlit –î–∞—à–±–æ—Ä–¥
                                                                          + AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
```

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ó–∞—á–µ–º |
|------------|--------|-------|
| **Go** | 1.21+ | –±—ç–∫–µ–Ω–¥, —Ä–æ—É—Ç–∏–Ω–≥ |
| **Python** | 3.10+ | –¥–∞—à–±–æ—Ä–¥ |
| **Gemini API Key** | ‚Äî | AI-–∞–Ω–∞–ª–∏–∑ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ) |

---

## –®–∞–≥ 1 ‚Äî –ü–æ–ª—É—á–∏—Ç—å Gemini API Key

1. –û—Ç–∫—Ä—ã—Ç—å: **https://aistudio.google.com/app/apikey**
2. –ù–∞–∂–∞—Ç—å **Create API key**
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª **`.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
GEMINI_API_KEY=AIza...–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
```

> ‚ö†Ô∏è –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ git ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.gitignore`

---

## –®–∞–≥ 2 ‚Äî –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
project/
‚îú‚îÄ‚îÄ main.go               ‚Üê Go-–±—ç–∫–µ–Ω–¥
‚îú‚îÄ‚îÄ go.mod                ‚Üê –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Go
‚îú‚îÄ‚îÄ app.py                ‚Üê Streamlit UI
‚îú‚îÄ‚îÄ .env                  ‚Üê GEMINI_API_KEY (—Å–æ–∑–¥–∞—Ç—å)
‚îî‚îÄ‚îÄ data/
    ‚îú‚îÄ‚îÄ tickets.csv
    ‚îú‚îÄ‚îÄ managers.csv
    ‚îú‚îÄ‚îÄ business_units.csv
    ‚îî‚îÄ‚îÄ results.csv       ‚Üê —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

```bash
mkdir -p data
cp tickets.csv managers.csv business_units.csv data/
```

---

## –®–∞–≥ 3 ‚Äî Go-–±—ç–∫–µ–Ω–¥

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Go

**macOS (Homebrew):**
```bash
brew install go
```

**Ubuntu / Debian:**
```bash
wget https://go.dev/dl/go1.21.0.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.0.linux-amd64.tar.gz
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
source ~/.bashrc
```

**Windows:** —Å–∫–∞—á–∞—Ç—å `.msi` –Ω–∞ https://go.dev/dl/ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
```bash
go version
# go version go1.21.x linux/amd64
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `go.mod` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):

```bash
go mod init fire
```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
go mod tidy
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ–¥–∏–Ω –ø–∞–∫–µ—Ç: `github.com/joho/godotenv`

### –ó–∞–ø—É—Å–∫:

```bash
go run main.go
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üî• FIRE ‚Äî Freedom Intelligent Routing Engine v6.0
‚úÖ –û—Ñ–∏—Å–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: 15 ‚Üí [–ê–ª–º–∞—Ç—ã –ê—Å—Ç–∞–Ω–∞ –®—ã–º–∫–µ–Ω—Ç ...]
‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: 51 –ø–æ 15 –æ—Ñ–∏—Å–∞–º

--- VIP-–ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –æ—Ñ–∏—Å–∞–º ---
  ‚úÖ –ê–ª–º–∞—Ç—ã               4 –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, 2 —Å VIP
  ‚úÖ –ê—Å—Ç–∞–Ω–∞               3 –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, 1 —Å VIP
  ‚ö†Ô∏è  –¢–∞—Ä–∞–∑               2 –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, 0 —Å VIP

üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –±–∞—Ç—á–∞: 31 —Ç–∏–∫–µ—Ç–æ–≤ ‚Üí 1 –∑–∞–ø—Ä–æ—Å –∫ Gemini AI...
‚úÖ AI –±–∞—Ç—á –∑–∞–≤–µ—Ä—à—ë–Ω: –ø–æ–ª—É—á–µ–Ω–æ 31/31 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
üåê –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ 31 —Ç–∏–∫–µ—Ç–æ–≤ (rate limit 1 req/sec)...
‚úÖ –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

üìã –†–æ—É—Ç–∏–Ω–≥ —Ç–∏–∫–µ—Ç–æ–≤...
[1/31] abc12345 | –ê–ª–º–∞—Ç—ã | –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è | –ø—Ä–∏–æ—Ä.5 [nominatim]
   üéØ –ò–≤–∞–Ω–æ–≤ –ê.–ê. (–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç) ‚Üí –æ—Ñ–∏—Å –ê–ª–º–∞—Ç—ã
...
‚úÖ –ì–æ—Ç–æ–≤–æ! –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 31 —Ç–∏–∫–µ—Ç–æ–≤ ‚Üí data/results.csv
```

> –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑–æ–ø–∞—Å–µ–Ω ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã –ø–æ GUID.  
> –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞: `rm data/results.csv`

---

## –®–∞–≥ 4 ‚Äî Python-–¥–∞—à–±–æ—Ä–¥

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python

**macOS:**
```bash
brew install python
```

**Ubuntu / Debian:**
```bash
sudo apt update && sudo apt install python3 python3-pip python3-venv -y
```

**Windows:** —Å–∫–∞—á–∞—Ç—å —Å https://python.org/downloads/ (–ø–æ—Å—Ç–∞–≤–∏—Ç—å –≥–∞–ª–æ—á–∫—É "Add to PATH")

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
```bash
python3 --version
# Python 3.10.x
```

### –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:
source venv/bin/activate          # macOS / Linux
venv\Scripts\activate             # Windows (cmd)
.\venv\Scripts\Activate.ps1       # Windows (PowerShell)
```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install streamlit pandas google-generativeai
```

### –ó–∞–ø—É—Å–∫:

```bash
streamlit run app.py
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8501**

> ‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `go run main.go` ‚Äî –¥–∞—à–±–æ—Ä–¥ —á–∏—Ç–∞–µ—Ç `data/results.csv`

---

## –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

| # | –£—Å–ª–æ–≤–∏–µ | –ü—Ä–∞–≤–∏–ª–æ |
|---|---------|---------|
| 1 | –õ—é–±–æ–π —Ç–∏–∫–µ—Ç | –ì–µ–æ-—Ñ–∏–ª—å—Ç—Ä ‚Üí –±–ª–∏–∂–∞–π—à–∏–π –æ—Ñ–∏—Å (Nominatim + Haversine) |
| 1a | –ê–¥—Ä–µ—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω / –∑–∞ —Ä—É–±–µ–∂–æ–º | 50/50 –ê—Å—Ç–∞–Ω–∞ / –ê–ª–º–∞—Ç—ã (—á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ) |
| 2 | –°–µ–≥–º–µ–Ω—Ç VIP –∏–ª–∏ Priority | –¢–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å –Ω–∞–≤—ã–∫–æ–º `VIP` |
| 3 | –¢–∏–ø ¬´–°–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö¬ª | –¢–æ–ª—å–∫–æ `–ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç` |
| 4 | –Ø–∑—ã–∫ KZ –∏–ª–∏ ENG | –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–ª–∂–µ–Ω –≤–ª–∞–¥–µ—Ç—å —è–∑—ã–∫–æ–º |
| 5 | –ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –≤ –æ—Ñ–∏—Å–µ | –≠—Å–∫–∞–ª–∞—Ü–∏—è –≤ –ì–û (–ê—Å—Ç–∞–Ω–∞, –ø–æ—Ç–æ–º –ê–ª–º–∞—Ç—ã) |
| 6 | –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ | –¢–æ–ø-2 —Å –Ω–∞–∏–º–µ–Ω—å—à–µ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π + Round Robin |
| 7 | –¢–∏–ø ¬´–°–ø–∞–º¬ª | –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã AI-–∞–Ω–∞–ª–∏–∑–∞

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –¢–∏–ø |
|-----------|-----|
| 10 | –ü—Ä–µ—Ç–µ–Ω–∑–∏—è —Å —É–≥—Ä–æ–∑–æ–π —Å—É–¥–∞ / –ª—é–±–æ–π VIP –∏–ª–∏ Priority —Å–µ–≥–º–µ–Ω—Ç |
| 9 | –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è |
| 8 | –ü—Ä–µ—Ç–µ–Ω–∑–∏—è (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞) |
| 7 | –ñ–∞–ª–æ–±–∞ —Å –¥–∞–≤–ª–µ–Ω–∏–µ–º |
| 6 | –ñ–∞–ª–æ–±–∞, –ù–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, –°–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö |
| 5 | –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è |
| 1 | –°–ø–∞–º |

---

## –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è (3 —É—Ä–æ–≤–Ω—è)

```
1. Nominatim (OpenStreetMap) ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí Haversine ‚Üí –±–ª–∏–∂–∞–π—à–∏–π –æ—Ñ–∏—Å  [–≥–ª–∞–≤–Ω—ã–π]
2. LLM fallback ‚Üí Gemini –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ñ–∏—Å –ø–æ —Ç–µ–∫—Å—Ç—É –∞–¥—Ä–µ—Å–∞               [–µ—Å–ª–∏ –Ω–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç]
3. 50/50 ‚Üí —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –ê—Å—Ç–∞–Ω–∞ / –ê–ª–º–∞—Ç—ã                                  [–∫—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π]
```

---

## –§–æ—Ä–º–∞—Ç results.csv

| –ö–æ–ª–æ–Ω–∫–∞ | –ü—Ä–∏–º–µ—Ä |
|---------|--------|
| `GUID` | `550e8400-e29b-...` |
| `–°–µ–≥–º–µ–Ω—Ç` | `VIP` |
| `–¢–∏–ø` | `–ñ–∞–ª–æ–±–∞` |
| `–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å` | `–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π` |
| `–Ø–∑—ã–∫` | `KZ` |
| `–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç` | `8` |
| `–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—É` | –ö–ª–∏–µ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞... |
| `–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –ú–µ–Ω–µ–¥–∂–µ—Ä` | –ò–≤–∞–Ω–æ–≤ –ê.–ê. |
| `–î–æ–ª–∂–Ω–æ—Å—Ç—å` | –ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç |
| `–û—Ñ–∏—Å –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è` | `–ê–ª–º–∞—Ç—ã (–ì–û)` ‚Äî —Å—É—Ñ—Ñ–∏–∫—Å –ø—Ä–∏ —ç—Å–∫–∞–ª–∞—Ü–∏–∏ |
| `–≠—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω` | `–î–∞` / `–ù–µ—Ç` |
| `–ì–æ—Ä–æ–¥_–æ—Ä–∏–≥–∏–Ω–∞–ª` | –¢—É—Ä–≥–µ–Ω—å |
| `–ü—Ä–∏—á–∏–Ω–∞_—Ä–æ—É—Ç–∏–Ω–≥–∞` | `Geo:Nominatim+Haversine ‚Üí VIP-—Å–µ–≥–º–µ–Ω—Ç ‚Üí Round Robin` |
| `AI_–ò—Å—Ç–æ—á–Ω–∏–∫` | `Gemini` / `Fallback` |
| `–ú–µ—Ç–æ–¥_–≥–µ–æ` | `nominatim` / `llm` / `50/50` |

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

| –û—à–∏–±–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|
| `GEMINI_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω` | –°–æ–∑–¥–∞–π—Ç–µ `.env` —Å –∫–ª—é—á–æ–º –≤ –∫–æ—Ä–Ω–µ |
| `rate limit 429` | –°–∏—Å—Ç–µ–º–∞ –∂–¥—ë—Ç 65 —Å–µ–∫ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| `–í—Å–µ —Ç–∏–∫–µ—Ç—ã —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã` | `rm data/results.csv` –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ |
| –î–∞—à–±–æ—Ä–¥ –ø—É—Å—Ç–æ–π | –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `go run main.go` |
| Nominatim timeout | –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ ‚Üí –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ LLM |
| `go: module not found` | –ó–∞–ø—É—Å—Ç–∏—Ç–µ `go mod tidy` |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```
main.go (1420 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ loadOffices()            ‚Üê business_units.csv ‚Üí knownOffices[]
‚îú‚îÄ‚îÄ loadManagers()           ‚Üê managers.csv ‚Üí ManagersMap[–æ—Ñ–∏—Å][]*Manager
‚îú‚îÄ‚îÄ analyzeBatch()           ‚Üê Gemini API, 1 –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–µ—Å—å –±–∞—Ç—á
‚îú‚îÄ‚îÄ fallbackAnalyze()        ‚Üê keyword-–∞–Ω–∞–ª–∏–∑ –±–µ–∑ API
‚îú‚îÄ‚îÄ geocodeAllParallel()     ‚Üê Nominatim + –∫—ç—à + rate limiter 1 req/sec
‚îú‚îÄ‚îÄ findBestManager()        ‚Üê VIP ‚Üí –°–º–µ–Ω–∞–î–∞–Ω–Ω—ã—Ö ‚Üí –Ø–∑—ã–∫ ‚Üí Round Robin
‚îú‚îÄ‚îÄ routeTicket()            ‚Üê –ø–æ–ª–Ω—ã–π –∫–∞—Å–∫–∞–¥ + —ç—Å–∫–∞–ª–∞—Ü–∏—è –≤ –ì–û
‚îî‚îÄ‚îÄ processAllTickets()      ‚Üê –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è + CSV
```
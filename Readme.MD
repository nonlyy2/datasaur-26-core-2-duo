# üî• FIRE ‚Äî Freedom Intelligent Routing Engine v6.0

## –°—Ç–µ–∫
- **Backend**: Go 1.21+
- **AI**: Google Gemini API (`gemma-3-27b-it`)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **UI**: Streamlit (app.py ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
project/
‚îú‚îÄ‚îÄ main.go                 ‚Üê –ë—ç–∫–µ–Ω–¥ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ .env                    ‚Üê –°–µ–∫—Ä–µ—Ç—ã (—Å–æ–∑–¥–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ app.py                  ‚Üê Streamlit UI (—Ç–≤–æ–π –¥—Ä—É–≥)
‚îî‚îÄ‚îÄ data/
    ‚îú‚îÄ‚îÄ tickets.csv         ‚Üê –í—Ö–æ–¥–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ managers.csv        ‚Üê –ú–µ–Ω–µ–¥–∂–µ—Ä—ã
    ‚îú‚îÄ‚îÄ business_units.csv  ‚Üê –û—Ñ–∏—Å—ã
    ‚îî‚îÄ‚îÄ results.csv         ‚Üê –í–´–•–û–î: —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞—Ç—å .env
```env
GEMINI_API_KEY=–≤–∞—à_–∫–ª—é—á_–æ—Ç_google_ai_studio

# PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ CSV)
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=fire_db

# –ò–ª–∏ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π:
# DATABASE_URL=postgresql://user:password@localhost:5432/fire_db
```

### 2. –ü–æ–ª—É—á–∏—Ç—å Gemini API –∫–ª—é—á
–ë–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ [Google AI Studio](https://aistudio.google.com/app/apikey)

### 3. –†–∞–∑–º–µ—Å—Ç–∏—Ç—å CSV —Ñ–∞–π–ª—ã
```bash
mkdir -p data
cp tickets.csv data/
cp managers.csv data/
cp business_units.csv data/
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod tidy

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–∏–∂–æ–∫
go run main.go
```

### 5. –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥ (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª)
```bash
pip install streamlit pandas google-generativeai
streamlit run app.py
```

---

## PostgreSQL ‚Äî —Å—Ö–µ–º–∞ –ë–î

–î–≤–∏–∂–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç 3 —Ç–∞–±–ª–∏—Ü—ã + view:

```sql
-- –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞: ticket ‚Üí ai_analysis ‚Üí routing_results
SELECT * FROM v_full_results;

-- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT * FROM tickets;           -- –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
SELECT * FROM ai_analysis;       -- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã AI-–∞–Ω–∞–ª–∏–∑–∞
SELECT * FROM routing_results;   -- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ—É—Ç–∏–Ω–≥–∞
```

**ER-–¥–∏–∞–≥—Ä–∞–º–º–∞:**
```
tickets (guid PK)
    ‚îî‚îÄ‚îÄ ai_analysis (guid FK) ‚Äî —Ç–∏–ø, —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —è–∑—ã–∫, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, summary
    ‚îî‚îÄ‚îÄ routing_results (guid FK) ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä, –æ—Ñ–∏—Å, –ø—Ä–∏—á–∏–Ω–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞
```

---

## –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó)

### AI-–∞–Ω–∞–ª–∏–∑ (NLP)
| –ê—Ç—Ä–∏–±—É—Ç | –ó–Ω–∞—á–µ–Ω–∏—è |
|---------|----------|
| –¢–∏–ø | –ñ–∞–ª–æ–±–∞, –°–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö, –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è, –ü—Ä–µ—Ç–µ–Ω–∑–∏—è, –ù–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è, –°–ø–∞–º |
| –¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | Positive, Neutral, Negative, **Legal Risk** |
| –Ø–∑—ã–∫ | RU (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), KZ, ENG |
| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | 1‚Äì10 (10 = –º–∞–∫—Å–∏–º—É–º) |
| Summary | 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä—É |
| –ì–µ–æ-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è | LLM –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–ª–∏–∂–∞–π—à–∏–π –æ—Ñ–∏—Å –ø–æ –∞–¥—Ä–µ—Å—É |

### –ö–∞—Å–∫–∞–¥ —Ä–æ—É—Ç–∏–Ω–≥–∞
1. **–ì–µ–æ-—Ñ–∏–ª—å—Ç—Ä** ‚Üí AI –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–ª–∏–∂–∞–π—à–∏–π –æ—Ñ–∏—Å –ø–æ –∞–¥—Ä–µ—Å—É –∫–ª–∏–µ–Ω—Ç–∞
2. **–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ/–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ** ‚Üí 50/50 –ê—Å—Ç–∞–Ω–∞/–ê–ª–º–∞—Ç—ã
3. **VIP/Priority —Å–µ–≥–º–µ–Ω—Ç** ‚Üí —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å–æ —Å–∫–∏–ª–ª–æ–º `VIP`
4. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚â• 7 –∏–ª–∏ Legal Risk** ‚Üí —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å–æ —Å–∫–∏–ª–ª–æ–º `VIP`
5. **VIP/Priority —Å–µ–≥–º–µ–Ω—Ç** ‚Üí –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 10
6. **–°–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Üí —Ç–æ–ª—å–∫–æ `–ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç`
7. **–Ø–∑—ã–∫ KZ/ENG** ‚Üí –º–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–ª–∂–µ–Ω –≤–ª–∞–¥–µ—Ç—å —è–∑—ã–∫–æ–º
8. **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞** ‚Üí —Ç–æ–ø-2 –º–µ–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö + Round Robin
9. **–≠—Å–∫–∞–ª–∞—Ü–∏—è** ‚Üí –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ ‚Üí –≤ –ì–û (–ê—Å—Ç–∞–Ω–∞/–ê–ª–º–∞—Ç—ã)
10. **–°–ø–∞–º** ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É, –º–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è

---

## –§–æ—Ä–º–∞—Ç results.csv (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å app.py)

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `GUID` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–∫–µ—Ç–∞ |
| `–ì–æ—Ä–æ–¥_–æ—Ä–∏–≥–∏–Ω–∞–ª` | –ò—Å—Ö–æ–¥–Ω—ã–π –≥–æ—Ä–æ–¥ –∏–∑ —Ç–∏–∫–µ—Ç–∞ |
| `–°–µ–≥–º–µ–Ω—Ç` | Mass / VIP / Priority |
| `AI_–¢–∏–ø` | –¢–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è |
| `AI_–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å` | –¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |
| `AI_–Ø–∑—ã–∫` | –Ø–∑—ã–∫ –æ–±—Ä–∞—â–µ–Ω–∏—è |
| `AI_–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç` | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1-10 |
| `AI_Summary` | –ö—Ä–∞—Ç–∫–∞—è –≤—ã–∂–∏–º–∫–∞ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
| `–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π_–ú–µ–Ω–µ–¥–∂–µ—Ä` | –§–ò–û –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ |
| `–î–æ–ª–∂–Ω–æ—Å—Ç—å` | –î–æ–ª–∂–Ω–æ—Å—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ |
| `–û—Ñ–∏—Å_–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è` | –û—Ñ–∏—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è |
| `–ü—Ä–∏—á–∏–Ω–∞_—Ä–æ—É—Ç–∏–Ω–≥–∞` | –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è |
| `AI_–ò—Å—Ç–æ—á–Ω–∏–∫` | Gemini / Fallback |

---

## –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

–î–≤–∏–∂–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ GUID –∏–∑ `results.csv`
–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã. –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ.

---

## Keyword Fallback

–ï—Å–ª–∏ Gemini API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (rate limit, –Ω–µ—Ç —Å–µ—Ç–∏), –¥–≤–∏–∂–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ keyword-–∞–Ω–∞–ª–∏–∑ –¥–ª—è 100% –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–∏–∫–µ—Ç–æ–≤ –±–µ–∑ –ø–æ—Ç–µ—Ä—å.